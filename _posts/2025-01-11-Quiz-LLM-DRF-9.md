---
layout: post
title: Quiz_LLM Function Calling & Structured Outputs
subtitle: TIL Day 110
cover-img: "/assets/img/background.png"
thumbnail-img: ''
share-img: ''
tags: [TIL, LLM, Tools]
author: polaris0208
---

## Function Calling
- 함수 호출 기능
- 미리 정의된 함수를 호출하여서 값을 얻고 답변에 반영하는 기능

### 활용
- **API** : 호출
  - **API**를 호출하여 날씨 등의 데이터를 얻어 답변에 반영
  - 작업 자동화 : 사용자 입력에서 데이터르 추출하여 복잡한 계산이나 정확한 값이 요구되는 작업을 자동으로 수행
  - 정보 추출/검색 : 입력된 문서에서 특정 데이터들을 추출하거나, 사용자 입력에서 인자를 추출하여 **DB**에서 문서 검색

## Structured Outputs
- 사용자가 원하는 형태에 맞춰 답변을 구조화 하여 전달하는 기능

### 방식
- **Function Calling** 을 통한 방식
  - `tools` 파라미터 내에서 `strict: true`를 설정한 뒤에 출력할 데이터 구조를 입력
  - 함수 호출을 지원하는 모델에서 모두 사용 가능
  - 실제 `Structured Outputs` 기능을 사용하는 것은 아님

- **Response Format** 지정 방식
  - 실제 `Structured Outputs` 기능 : 2024년 8월부터 추가된 기능
    - `gpt-4o-mini-2024-07-18, gpt-4o-2024-08-06` 이상의 모델에서 지원
  - `Response Format`에 데이터 구조를 정의
  - 작동 방식
    - 사용자가 정의한 구조를 모델에 문법으로 제공 : 문맥 자유 문법(**Context-Free Grammar**)
    - 해당 문법에 해당하지 않는 토큰의 확률을 마스킹하여 0으로 만들어 사용자가 원하는 구조의 답변만 반환

### 활용
- 데이터 추출 및 정형화 : 텍스트에서 필용한 데이터만 추출한 뒤에 원하는 구조로 정리
- **UI** 생성 : 추출한 데이터를 미리 정의한 **UI** 구조에 자동으로 적용하여 생성
- 분석 결과 구조화 : 데이터를 추출한 뒤에 모델을 통해 얻은 분석 결과와 함께 정리

### 장점
- 원하는 구조에 데이터를 얻을 수 있어 **API**에 유용하게 활용 가능
- 예측가능한 형태의 출력을 얻을 수 있어 오류 가능성이 감소
- 별도의 데이터 변환 과정이 불필요
- 프롬프트에 예시 데이터 구조를 넣지 않아도 되기 때문에 추가 컨텍스트 공간 확보
  - 프롬프트에는 추가적인 지시사항 추가 가능, 긴 컨텍스트로 인해 답변의 질적 수준이 하랃하는 것 방지